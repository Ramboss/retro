                              РАДЧЕНКО Л.И.
                            КОМПЛЕКС ПРОГРАММ
               ДЛЯ ОБРАБОТКИ И ТИРАЖИРОВАНИЯ ПАКЕТОВ ФАЙЛОВ
                      "К О П И Р О В Щ И К    вып.4".
                             Москва, 1991.

       Комплекс программ "Копировщик вып.4" предназначен для использования
на ЭВМ  ПОИСК, работающей с MS DOS в оболочке NORTON  COMMANDER, для обработки
и тиражирования магнитофонных версий пакетов файлов, созданных с помощью
персональных ЭВМ  ПОИСК, МС 1502, БК-0010.
       Максимальный суммарный объем одновременно обрабатываемого и тиражируе-
мого пакета файлов составляет 400 кбайт.
       Максимальная длина обрабатываемых и тиражируемых файлов 64 кбайта.
       Комплекс состоит из 23 программ:
       COPY.COM - пофайловый  копировщик магнитофонных версий программ,
       MAGTEST.COM - отладчик магнитофонных версий программ,
       FORMP360.BAT - программа форматирования диска на 360 кбайт,
       FORMP730.BAT - программа форматирования диска на 730 кбайт,
       FP730.COM - программа форматирования диска,
       CLVD.COM - программа очистки и начальной установки виртуального диска,
       PMP.COM - драйвер считывания с магнитофонной ленты пакетов  файлов,
записанных в формате ПОИСКА,
       PMM.COM - драйвер считывания с магнитофонной ленты пакетов файлов,
записанных в формате МС 1502,
       PMB.COM - драйвер считывания с магнитофонной ленты пакетов файлов,
записанных в формате БК-0010,
       PDP.COM - драйвер записи на магнитофонную ленту пакетов файлов  в
формате ПОИСКА,
       PDM.COM - драйвер записи на магнитофонную ленту пакетов файлов  в
формате МС 1502,
       PDB.COM - драйвер записи на магнитофонную ленту пакетов файлов  в
формате БК-0010,
       PDN.COM - программа выдачи сигнала для установки уровня записи на маг-
нитофоне,
       NAMEP.COM - программа чтения имен файлов, записанных в формате ПОИСКА,
       NAMEM.COM - программа чтения имен файлов, записанных в формате МС 1502,
       NAMEB.COM - программа чтения имен файлов, записанных в формате БК-0010,
       CODA.COM - программа перекодировки в пакетах текстов заглавных букв в
строчные,
       CODB.COM - программа перекодировки в пакетах текстов русских заглавных
букв в русские строчные буквы,
       CODC.COM - программа перекодировки в пакетах текстов заглавных букв в
русские строчные буквы,
       CODIB.COM - программа перекодировки пакетов текстов IBM-совместимых
машин в тексты БК-0010,
       CODBI.COM - программа перекодировки пакетов текстов БК-0010 в тексты
IBM-совместимых машин.
       JMPBIOS.COM - программа выхода из MS DOS и перехода в BIOS с инициали-
зацией функций работы с магнитофоном.
       COPY.DOC - документация на комплекс программ.

       Для полной реализации возможностей комплекса программ желательно иметь
ЭВМ ПОИСК в следующей конфигурации:
       системный модуль,
       один-два блока расширения памяти В107,
       внешнее запоминающее устройство ВЗУ-2,3 (адаптер дискового накопителя
В504 и один-два дисковода),
       блок питания,
       магнитофон.
       В качестве операционной системы может применяться MS DOS версии не ниже
3.30 и NORTON COMMANDER. В составе системного обеспечения желательно иметь
файлы: IBMBIO.COM, IBMDOS.COM, ANSI.SYS, AUTOEXEC.BAT, COMMAND.COM, CONFIG.SYS,
NC.EXE, NC.INI, VDISK.SYS.
       Комплекс программ для обработки и тиражирования пакетов файлов в качест-
ве буфера использует виртуальный диск, размещаемый в адресуемой оперативной
памяти машины. При одном блоке расширения памяти максимальный объем виртуаль-
ного диска может составлять до 140 кбайт, а с двумя блоками расширения памяти-
до 400 кбайт. Объем виртуального диска, например, 360 кбайт может задаваться
пользователем путем редактирования файла CONFIG.SYS. Для этого, находясь в
NORTON COMMANDER, надо вызвать файл CONFIG.SYS  на редактирование и включить
в список устройств виртуальный диск, записав строчку: device = vdisk.sys 360.
В принципе в машине могут быть определены несколько виртуальных дисков. Поэто-
му описание виртуального диска, используемого в качестве буфера, должно стоять
первым.
       Подготовка программ для обработки и тиражирования ( выбор пакета файлов,
копирование их с диска на виртуальный диск и обратно, переименование и т.д.)
осуществляется стандартными операциями NORTON COMMANDER.
       Для инициализации всей системы надо вставить диск в дисковод и сделать
перезапуск компьютера.
       Почти все программы комплекса не требуют управления. Их запуск осущест-
вляется обычным образом из NORTON COMMANDER. После окончания своей работы
программы возвращают управление NORTON COMMANDER.


       ПОФАЙЛОВЫЙ КОПИРОВЩИК МАГНИТОФОННЫХ ВЕРСИЙ ПРОГРАММ COPY.COM.
       Копировщик предназначен для пофайлового копирования магнитофонных
версий программ на магнитофон. После его запуска на экран выводится перечень
режимов копировщика:
       1 - запись файла в формате ПОИСКА,
       2 - запись файла в формате МС 1502,
       3 - запись файла в формате БК 0010,
       4 - чтение первого найденного файла в формате ПОИСКА,
       5 - чтение требуемого файла в формате ПОИСКА,
       6 - чтение первого найденного файла в формате МС 1502,
       7 - чтение требуемого файла в формате МС 1502,
       8 - чтение первого найденного файла в формате БК 0010,
       9 - чтение требуемого файла в формате БК 0010,
       I - перекодирование текстовых файлов для БК 0010 в текстовые файлы для
IBM совместимых машин,
       B - перекодирование текстовых файлов для IBM совместимых машин в тексты
для БК 0010.
       Q -  выход в  MS DOS.
       Выбор операций желательно осуществлять набором на дополнительной клави-
атуре, переключив её в цифровой режим.
       Для прерывания операций чтения надо нажать любую клавишу на дополнитель-
ной клавиатуре.
       После выбора операции чтения требуемого файла курсор перемещается в ок-
но индикации имени ЗАГРУЖЕН ФАЙЛА: , после чего программа ждет ввода имени
файла для считывания. Имя не должно превышать 8 символов.

           ОТЛАДЧИК МАГНИТОФОННЫХ ВЕРСИЙ ПРОГРАММ   MAGTEST.COM.
       Программа предназначена для отладки магнитофонных версий программ.
       Она управляется следующими командами:
       A - ассемблирование,
       B - возвращение в MS DOS,
       C - вычисление контрольной суммы,
       D - индикация содеримого памяти,
       E - сравнение областей памяти,
       F - заполнение памяти константой,
       G - запуск программы на выполнение,
       H - вычисление суммы и разности,
       I - запрещение или разрешение прерываний,
       J - тестирование ОЗУ,
       K - тестирование клавиатуры,
       L - включение и выключение печати,
       M - пересылка области памяти,
       O - включение/выключение ассемблировани-дизассемблирования,
       P - ввод/вывод данных по порту,
       Q - чтение и запись произвольных секторов на диске,
       R - чтение диска,
       S - просмотр и изменение памяти,
       T - трассировка,
       U - дизассемблирование,
       V - верификация дорожки диска,
       W - запись на диск,
       X - индикация и изменение регистров,
       Y - форматирование диска,
       Z - сброс дискового устройства,
       ? - выдача меню,
       1 - тестирование видеомонитора,
       2 - чтение файла,
       3 - запись файла,
       4 - тестирование магнитофона,
       0 - переключение последовательной и параллельной печати.
       После запуска программы в регистре CS устанавливается сегментный адрес
начала свободной памяти.


       ПРОГРАММЫ ФОРМАТИРОВАНИЯ ДИСКА - FORMP730.BAT, FORMP360.BAT,FP730.COM.
       При однодисковой конфигурации Поиска драйвер дисковода обеспечивает
при обращении к диску A: работу с дискетами, отформатированными на 720-730
кбайт, а при обращении к диску C: работу с дискетами на 360 кбайт.
       Особенностью адаптера Поиска является то, что при опросе его параметров
они оказываются не совпадающими с параметрами, заложенными в известных про-
граммах форматирования.
       Поэтому разработаны версии программ форматирования, которые позволяют
отформатировать диск A: на ёмкость 730 кбайт, а диск C: на ёмкость 360 кбайт.
Соответствующее форматирование производится вызовом программ FORMP730.BAT и
FORMP360.BAT.


       ПРОГРАММА ОЧИСТКИ И НАЧАЛЬНОЙ УСТАНОВКИ ВИРТУАЛЬНОГО ДИСКА CLVD.COM.
       Программа предназначена для очистки и начальной установки виртуального
диска. Она не требует никакого управления. Применять её желательно перед
формированием на виртуальном диске пакета файлов для тиражирования.
       При первом использовании программы после запуска MS DOS возможна си-
туация, когда виртуальный диск очищен, а на панели индикации содержимого этого
диска в NORTON COMMANDER остаются выведенными имена файлов. Для стирания их
надо перейти на другую панель и дать два раза команду CTRL/L.


 ДРАЙВЕРЫ СЧИТЫВАНИЯ С МАГНИТОФОНА ПАКЕТОВ ФАЙЛОВ - PMP.COM, PMM.COM, PMB.COM.
       Драйверы считывания с магнитофона пакетов файлов обеспечивают чтение
файлов с магнитофона и запись их на виртуальный диск методом прямого доступа
к виртуальному диску. Процесс длится до тех пор, пока для следующего файла
окажется недостаточно места на диске, о чем программа выдаст сообщение. При
запуске драйверов происходит автоматическая очистка и инициализация виртуаль-
ного диска.
       На экран выводятся имена найденных файлов: для файлов, записанных в
формате ПОИСКА и МС 1502, имена выводятся сразу после их считывания; а для
файлов, записанных в формате БК 0010 - после считывания всего файла.
       MS DOS оперирует с именами файлов, состоящими из 8 латинских символов.
Поэтому после считывания файлов в формате БК 0010 имена усекаются до 8 симво-
лов, которые перекодируются в латинские заглавные. Адрес загрузки файла пере-
сылается на место даты создания файла. Дата создания файла в MS DOS кодируется
следующим образом: младшие пять разрядов слова определяют день, следующие
четыре разряда определяют месяц и старшие семь разрядов определяют год минус
1980. В качестве расширения имени считанного файла используется имя данного
драйвера. В таком виде оглавление файла хранится и обрабатывается MS DOS.
       Для прерывания работы программы достаточно нажать любую клавишу на
дополнительном цифровом поле, после чего чтение файлов будет прекращено.
       При обнаружении ошибки контрольной суммы в считываемом файле програм-
ма выдаст сообщение об этом и чтение будет завершено.
       После завершения работы программы управление передается NORTON
COMMANDER, в которой стандартными операциями можно обрабатывать весь считанный
пакет файлов.


    ДРАЙВЕРЫ ЗАПИСИ НА МАГНИТОФОН ПАКЕТОВ ФАЙЛОВ - PDP.COM, PDM.COM, PDB.COM.
       Драйверы предназначены для записи с виртуального диска на магнитофон
пакетов файлов.
       После запуска драйвера происходит запрос количества записываемых копий.
Количество записываемых копий определяется нажатием цифровых клавиш от 1 до 4.
Копии отдельного файла записываются подряд. Таким образом, максимальный объем
информации, записываемой при одном запуске драйвера, может составить 1600
кбайт, что соответствует звучанию магнитофонной кассеты 2 часа 40 минут.
       Перед записью копии файла на экран выводится его имя без расширения.
       Прерывание процесса записи пакета программ осуществляется перед записью
следующей программы нажатием клавиш CTRL/C, после чего управление от драйвера
передается NORTON COMMANDER.


       ПРОГРАММА ВЫДАЧИ СИГНАЛА ДЛЯ УСТАНОВКИ УРОВНЯ ЗАПИСИ - PDN.COM.
       Программа предназначена для выдачи сигнала для установки уровня записи
на магнитофоне. После запуска программы на магнитофон подается настроечная
последовательность. Прерывание работы программы осуществляется нажатием любой
клавиши на дополнительном цифровом поле.


       ПРОГРАММЫ ЧТЕНИЯ ИМЕН ФАЙЛОВ - NAMEP.COM, NAMEM.COM, NAMEB.COM.
       Программы предназначены для чтения имен файлов, расположенных на кас-
сете. При работе программ очистки виртуального диска не производится, имена
файлов на него не записываются, а выводятся на экран. Для файлов в формате
ПОИСКА и МС 1502 выводятся имена, а также длина файла в шестнадцатиричной
системе счисления. Для файлов в формате БК 0010 выводятся имена с перекоди-
ровкой символов в латинские заглавные, адрес загрузки и длина файла в
шестнадцатиричной системе счисления.
       Для возврата в NORTON COMMANDER достаточно нажать любую клавишу на до-
полнительном цифровом поле.


                      ПРОГРАММЫ ПЕРЕКОДИРОВКИ ТЕКСТА
             CODA.COM, CODB.COM, CODC.COM,CODBI.COM, CODIB.COM.
       Программы обеспечивают перекодировку символов в во всем пакете файлов,
расположенном на виртуальном диске. Перекодировка имен файлов не производится.


                  ПРОГРАММА ПЕРЕХОДА В BIOS - JMPBIOS.COM.
       При запуске программы происходит переход в BIOS машины, после чего
можно выбрать стандартные режимы работы: с магнитофоном или с ПЗУ.
